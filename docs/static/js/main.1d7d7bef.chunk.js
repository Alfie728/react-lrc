(this["webpackJsonpreact-media-session-example"]=this["webpackJsonpreact-media-session-example"]||[]).push([[0],{21:function(e,n,t){e.exports=t(30)},30:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(9),c=t.n(a),i=t(1),l=[{id:2,cover:"./source/d0c670fed000d3330cf26f704b4e7a86.jpeg",singers:["Cailin Russo","Chrissy Costanza"],name:"Phoenix",album:"Phoenix",src:"./source/Cailin Russo,Chrissy Costanza - Phoenix.m4a",lrc:"[00:11.89]What are you willing to lose\n[00:13.73]You cover your wounds but underneath them\n[00:17.74]A million voices in your head that whisper \"Stop now\"\n[00:23.38]Another twist of the knife turn of the screws\n[00:26.60]It's all in your mind and it's fighting you\n[00:30.33]Arm yourself a storm is coming\n[00:33.63]Well kid\n[00:34.94]What you gonna do now\n[00:40.84]It's your reflection looking back to pull you down\n[00:46.44]So are you gonna die today or make it out alive\n[00:51.96]You gotta conquer the monster in your head and then you'll fly\n[00:56.82]Fly Phoenix fly\n[01:00.31]It's time for a new empire\n[01:02.81]Go bury your demons then tear down the ceiling\n[01:08.47]Phoenix fly\n[01:14.86]And now you're playing with matches come out of the ashes\n[01:18.24]Underneath you a million voices in the crowd they're screaming \"Stop now\"\n[01:26.28]Well let 'em swallow their pride you're turning the tide to true believers\n[01:32.01]Got them in the palm of your hand you're playing God now\n[01:37.86]What you gonna do now\n[01:43.65]It's your reflection looking back to pull you down\n[01:49.32]So are you gonna die today or make it out alive\n[01:54.77]You gotta conquer the monster in your head and then you'll fly\n[01:59.74]Fly Phoenix fly\n[02:03.10]It's time for a new empire\n[02:05.68]Go bury your demons then tear down the ceiling\n[02:11.32]Phoenix fly\n[02:16.65]What you gonna do now\n[02:20.84]What you gonna do now\n[02:46.58]So are you gonna die today or make it out alive\n[02:52.06]You gotta conquer the monster in your head and then you'll fly\n[02:56.83]Fly Phoenix fly\n[03:00.22]It's time for a new empire\n[03:02.90]Go bury your demons then tear down the ceiling\n[03:08.52]Phoenix fly"},{id:1,cover:"./source/b5d358e6c54c15bf0d80ad288aba377b.jpeg",singers:["\u9648\u857e"],name:"\u5f53\u6211\u8ff7\u5931\u65f6\u542c\u7740\u7684\u6b4c",album:"\u5f53\u6211\u8ff7\u5931\u65f6\u542c\u7740\u7684\u6b4c",src:"./source/\u9648\u857e - \u5f53\u6211\u8ff7\u5931\u65f6\u542c\u7740\u7684\u6b4c.mp3",lrc:"[00:28.41]\u4e3a\u7740\u4ec0\u4e48\u8ffd\u8d76\u5230\u5934\u6765\u6709\u53d8\u8d28\u5417\n[00:35.34]\u65e5\u591c\u626e\u6f14\u5f00\u5fc3\u89d2\u8272\u5417 \u5374\u603b\u4e00\u4e2a\u9762\u5bf9\n[00:42.41]\u4e00\u4e2a \u6d41\u6d6a\u54ea\u4e00\u8857\u89d2\u627e\u54ea\u4efd\u5bc4\u6258\n[00:49.02]\u4e00\u4e2a \u95f9\u5e02\u4e2d\u5374\u53ea\u5f97\u6211\n[00:55.49]\u8fd9\u5239\u90a3\u5374\u60f3\u5230\u81f3\u4eb2\u7684\u8bf4\u8bdd\n[01:02.14]\u5982\u82e5\u8ff7\u5931\u8bf7\u8c28\u8bb0\u56de\u5bb6\n[01:06.19]\u8ff7\u8def\u4e0d\u8981\u60ca\u6015\n[01:08.95]\u524d\u8def\u96be\u5173\u90fd\u7ed9\u4f60\u62db\u67b6\n[01:12.83]\u5982\u50cf\u5b69\u5b50\u90a3\u6837\u9760\u7740\u6211\u4e0d\u6015\n[01:19.72]\u597d\u597d\u7684\u653e\u4e00\u5047\n[01:23.76]\u91cd\u6574\u7406\u5185\u5fc3\u79ef\u538b\u518d\u51fa\u53d1\n[01:36.13]\u671b\u7740\u7236\u4eb2\u4e0d\u7ecf\u5df2\u767d\u5934\u53d1\u4e5f\u6591\u6591\n[01:42.66]\u5bb6\u4e2d\u6bcf\u4e00\u4f4d\u90fd\u5c1a\u597d\u5417 \u6211\u4e0d\u6562\u81f4\u7535\u4f60\n[01:49.90]\u751f\u6015 \u63d0\u53ca\u6211\u7684\u4e00\u5207\u53ef\u4f1a\u4ee4\u4f60\u5fc3\u6302\n[01:56.77]\u751f\u6015 \u8bf4\u5230\u58f0\u7ebf\u53d8\u6c99\u54d1\n[02:03.00]\u8fd8\u672a\u6210\u529f\u4e0d\u6562\u8bf4\u56de\u5bb6\n[02:06.97]\u8981\u518d\u6253\u62fc\u4e00\u4e0b\n[02:09.79]\u540c\u5b66\u4eec\u7eb7\u7eb7\u90fd\u5df2\u51fa\u5ac1\n[02:13.76]\u4ecd\u5728\u7559\u5b88\u8fd9\u5730 \u52aa\u529b\u5f80\u4e0a\u722c\n[02:20.64]\u591a\u5c11\u98ce\u96e8\u6d17\u5237\n[02:24.60]\u8fd8\u53ef\u6709\u529b\u6c14\u62b5\u6297\u5417\n[02:30.01]\u8981\u8bb0\u4f4f\u56de\u5934\u770b\u73b0\u72b6\n[02:33.74]\u4f1a\u53d1\u73b0\u5df2\u8fc7\u4e09\u5173\u65a9\u4e86\u516d\u5c06\n[02:41.62]\u66fe\u4ea6\u6709\u7070\u8272\u601d\u7eea\u5728\u6269\u5f20\n[02:46.45]\u4f60\u5374\u662f\u5f80\u65e5\u707f\u70c2\u6a21\u6837\n[02:49.65]\u9ed8\u9ed8\u5730\u4e3a\u6211\u5728\u71c3\u4eae\n[03:21.01]\u5982\u82e5\u8ff7\u5931\u8bf7\u8c28\u8bb0\u56de\u5bb6\n[03:24.91]\u8ff7\u8def\u4e0d\u518d\u60ca\u6015\n[03:27.57]\u524d\u8def\u96be\u5173\u90fd\u7ed9\u6211\u62db\u67b6\n[03:31.50]\u72b9\u5e78\u80fd\u5f97\u4f60\u62a4\u836b \u505a\u4f60 \u4eb2\u624b\u683d\u79cd\u7684\u82b1\n[03:39.34]\u82e5\u8dcc\u5012\u7eb5\u4f7f\u6ee1\u8eab\u4f24\u75d5\u6c89\u6ca6\u5728\u6d41\u6c99\n[03:46.08]\u6211\u90fd\u4e0d\u6015\n[03:47.08]\u4e5f\u5f97\u4f60\u7684\u53cc\u624b\u5f15\u8def\u56de\u5bb6\n[03:55.80]\u518d\u90fd\u4e0d\u6015"}],u={container:{position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",alignItems:"center"},part:{flex:1},audio:{width:"100%",margin:"20px 0"}},s=t(10);function f(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  background-color: ",";\n  > .cover {\n    width: 60px;\n    height: 60px;\n  }\n  > .info {\n    flex: 1;\n    min-width: 0;\n    margin-left: 20px;\n    > .name {\n      font-size: 14px;\n    }\n    > .singers {\n      font-size: 12px;\n      color: gray;\n    }\n  }\n"]);return f=function(){return e},e}var m=t(11).a.div(f(),(function(e){return e.playing?"rgba(49, 194, 124, 0.2)":"white"})),d=function(e){var n=e.music,t=e.playing,r=e.onPlay;return o.a.createElement(m,{playing:t},o.a.createElement("img",{src:n.cover,alt:"cover",className:"cover"}),o.a.createElement("div",{className:"info"},o.a.createElement("div",{className:"name"},n.name),o.a.createElement("div",{className:"singers"},n.singers.join(",")),o.a.createElement("div",{className:"actions"},o.a.createElement("button",{type:"button",onClick:function(){return r(n)}},t?"playing":"play"))))},y=t(15),h=function(e){var n=e.music,t=e.onPrevious,a=e.onNext,c=e.onTimeUpdate,i=Object(r.useRef)(),l=Object(r.useCallback)((function(){return i.current.play()}),[]),s=Object(r.useCallback)((function(){return i.current.pause()}),[]);return o.a.createElement(y.a,{title:n.name,artist:n.singers.join(","),artwork:[{src:n.cover,sizes:"512x512"}],onPlay:l,onPause:s,onPreviousTrack:t,onNextTrack:a},o.a.createElement("audio",{src:n.src,autoPlay:!0,loop:!0,controls:!0,style:u.audio,ref:i,onTimeUpdate:c}))},b=t(19),g=t(16),v=t(17),p=t(3),j=t(20),C=t(18),O=t(8),L=t(6),w="react_lrc_line_".concat(Math.random().toString(36).substring(7)),E=/^(\[[0-9]+:[0-9]+(\.[0-9]+)?\])+.*/,x=/\[[0-9]+:[0-9]+(\.[0-9]+)?\]/g,k=/[0-9]+/g,S=function(e){var n,t=[],r=e.split("\n"),o=Object(L.a)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(E.test(a)){var c,l=a.match(x),u=a.replace(x,""),s=Object(L.a)(l);try{for(s.s();!(c=s.n()).done;){var f=c.value.match(k),m=Object(i.a)(f,3),d=m[0],y=m[1],h=m[2],b=void 0===h?"0":h;t.push({millisecond:60*Number.parseInt(d,10)*1e3+1e3*Number.parseInt(y,10)+Number.parseInt(b,10),content:u})}}catch(g){s.e(g)}finally{s.f()}}}}catch(g){o.e(g)}finally{o.f()}return t.sort((function(e,n){return e.millisecond-n.millisecond}))},T=function(){return o.a.createElement("div",{style:{height:"50%"}})},P=function(e){var n=e.lrc,t=e.currentTime,a=void 0===t?0:t,c=e.children,l=e.autoScrollAfterUserScroll,u=void 0===l?5e3:l,s=e.onCurrentLineChange,f=e.scrollToCurrentLineSymbol,m=Object(O.a)(e,["lrc","currentTime","children","autoScrollAfterUserScroll","onCurrentLineChange","scrollToCurrentLineSymbol"]),d=Object(r.useRef)(null),y=function(e){var n=e.rootRef,t=e.autoScrollAfterUserScroll,o=e.scrollToCurrentLineSymbol,a=Object(r.useState)(!0),c=Object(i.a)(a,2),l=c[0],u=c[1];return Object(r.useLayoutEffect)((function(){n.current.style.overflow="auto"}),[]),Object(r.useLayoutEffect)((function(){var e,r=function(){u(!1),clearTimeout(e),e=setTimeout((function(){return u(!0)}),t)};return n.current.addEventListener("wheel",r),function(){return n.current.removeEventListener("wheel",r)}}),[t]),Object(r.useEffect)((function(){u(!0)}),[o]),l}({rootRef:d,autoScrollAfterUserScroll:u,scrollToCurrentLineSymbol:f}),h=Object(r.useState)(-1),b=Object(i.a)(h,2),g=b[0],v=b[1],p=function(e){var n=Object(r.useState)(S(e)),t=Object(i.a)(n,2),o=t[0],a=t[1];return Object(r.useEffect)((function(){a(S(e))}),[e]),o}(n),j=function(e){var n=e.lrcLineList,t=e.rootRef,o=Object(r.useRef)(new Map),a=Object(r.useCallback)((function(){var e;o.current=new Map;for(var n=document.querySelectorAll(".".concat(w)),r=0,a=n.length;r<a;r+=1){var c=n[r];o.current.set(r,c.offsetTop)}var i=null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect();o.current.set(1/0,(null===i||void 0===i?void 0:i.height)||0)}),[]);return Object(r.useEffect)((function(){var e,n=function(){clearTimeout(e),e=setTimeout(a,1e3)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[a]),Object(r.useLayoutEffect)((function(){a()}),[n]),o.current}({lrcLineList:p,rootRef:d});return Object(r.useLayoutEffect)((function(){for(var e=p.length,n=0;n<e;n+=1){var t=p[n].millisecond;if(a<t)break}v(n-1)}),[a,p]),Object(r.useLayoutEffect)((function(){var e;y&&(null===(e=d.current)||void 0===e||e.scrollTo({left:0,top:(j.get(g)||0)-(j.get(1/0)||0)/2,behavior:"smooth"}))}),[g,y]),Object(r.useEffect)((function(){s&&s(p[g]||null,g)}),[g,p,s]),o.a.createElement("div",Object.assign({},m,{ref:d}),o.a.createElement(T,null),p.map((function(e,n){return c(e,n===g,n)})),o.a.createElement(T,null))},N=function(e){Object(j.a)(t,e);var n=Object(C.a)(t);function t(e){var r;return Object(g.a)(this,t),(r=n.call(this,e)).state={scrollToCurrentLineSymbol:0,currentLrcLine:null,currentLrcLineIndex:-1},r.onCurrentLineChange=r.onCurrentLineChange.bind(Object(p.a)(r)),r}return Object(v.a)(t,[{key:"scrollToCurrentLine",value:function(){this.setState({scrollToCurrentLineSymbol:Math.random()})}},{key:"getCurrentLine",value:function(){var e=this.state;return{lrcLine:e.currentLrcLine,index:e.currentLrcLineIndex}}},{key:"onCurrentLineChange",value:function(e,n){var t=this.props.onCurrentLineChange;this.setState({currentLrcLine:e,currentLrcLineIndex:n},(function(){t&&t(e,n)}))}},{key:"render",value:function(){var e=this.state.scrollToCurrentLineSymbol;return o.a.createElement(P,Object.assign({},this.props,{onCurrentLineChange:this.onCurrentLineChange,scrollToCurrentLineSymbol:e}))}}]),t}(r.PureComponent),I=function(e){var n=e.className,t=void 0===n?"":n,r=Object(O.a)(e,["className"]);return o.a.createElement("div",Object.assign({},r,{className:"".concat(w," ").concat(t)}),r.children)},R={wrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column"},lrc:{flex:1,padding:20},line:{textAlign:"center",padding:10,fontSize:16}},A=function(e){var n=e.music,t=e.currentTime,a=Object(r.useRef)(),c=Object(r.useCallback)((function(){return a.current.scrollToCurrentLine()}),[]),i=Object(r.useCallback)((function(){alert(JSON.stringify(a.current.getCurrentLine()))}),[]),l=Object(r.useCallback)((function(e,n){console.log("\n"),console.log(e,n)}),[]);return o.a.createElement("div",{style:R.wrapper},o.a.createElement("div",{className:"actions"},o.a.createElement("button",{type:"button",onClick:c},"scroll to current line"),o.a.createElement("button",{type:"button",onClick:i},"alert current line")),o.a.createElement(N,{lrc:n.lrc,currentTime:1e3*t,onCurrentLineChange:l,style:R.lrc,ref:a},(function(e,n){return o.a.createElement(I,{key:e.millisecond,style:Object(b.a)({},R.line,{color:n?"red":"gray"})},e.content)})))},z=function(){var e=Object(r.useState)(0),n=Object(i.a)(e,2),t=n[0],a=n[1],c=Object(r.useCallback)((function(){return a((function(e){var n=e-1;return n<0?n+l.length:n}))}),[]),s=Object(r.useCallback)((function(){return a((function(e){return(e+1)%l.length}))}),[]),f=Object(r.useState)(0),m=Object(i.a)(f,2),y=m[0],b=m[1],g=Object(r.useCallback)((function(e){return b(e.target.currentTime)}),[]),v=l[t];return o.a.createElement("div",{style:u.container},o.a.createElement("div",{style:u.part},l.map((function(e,n){return o.a.createElement(d,{key:e.id,music:e,playing:n===t,onPlay:function(){return a(n)}})})),o.a.createElement(h,{music:v,onPrevious:c,onNext:s,onTimeUpdate:g})),o.a.createElement(A,{music:v,currentTime:y}))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(z,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.1d7d7bef.chunk.js.map